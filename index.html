<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>BNZ CASINO - VERSION ULTIME</title>
    <style>
        body { font-family: 'Impact', sans-serif; background: #050505; color: white; text-align: center; margin: 0; }
        .header { background: #111; padding: 20px; border-bottom: 5px solid gold; box-shadow: 0 0 20px gold; }
        #chips-display { font-size: 3.5rem; color: gold; }
        
        .slot-machine { margin: 30px auto; padding: 25px; background: #1a1a1a; width: fit-content; border: 8px solid #333; border-radius: 30px; }
        .reels-container { display: flex; gap: 15px; margin-bottom: 25px; }
        .reel { width: 100px; height: 130px; background: #fff; color: #000; font-size: 3.5rem; display: flex; align-items: center; justify-content: center; border-radius: 15px; border-bottom: 6px solid #bbb; }
        
        #action-box { 
            min-height: 140px; margin: 20px auto; width: 90%; max-width: 550px;
            background: #000; border: 2px solid #444; padding: 20px;
            display: flex; flex-direction: column; justify-content: center;
        }
        .title-event { font-size: 1.8rem; font-weight: bold; margin-bottom: 10px; text-transform: uppercase; }
        .desc-event { color: #00ff00; font-family: 'Arial', sans-serif; font-size: 1.2rem; }

        .btn { padding: 20px 60px; font-size: 1.8rem; cursor: pointer; border: none; border-radius: 15px; font-weight: bold; }
        #spin-btn { background: #ffcc00; color: #000; box-shadow: 0 8px #997700; }
        #spin-btn:active { box-shadow: 0 2px #997700; transform: translateY(4px); }
        #spin-btn:disabled { background: #222; color: #444; box-shadow: none; }
        #refill-btn { background: #d32f2f; color: white; display: none; }

        .rare { color: #ff00ff; text-shadow: 0 0 10px #ff00ff; }
        .legendary { color: gold; text-shadow: 0 0 20px gold; }
    </style>
</head>
<body>

    <div class="header">
        <div id="chips-display">100</div>
        <div style="font-size: 0.9rem; letter-spacing: 3px;">JETONS VIRTUELS</div>
    </div>

    <div class="slot-machine">
        <div class="reels-container">
            <div class="reel" id="r0">?</div>
            <div class="reel" id="r1">?</div>
            <div class="reel" id="r2">?</div>
        </div>
        <button id="spin-btn" class="btn" onclick="play()">SPIN (-10)</button>
        <button id="refill-btn" class="btn" onclick="refill()">J'AI BU MON SHOT</button>
    </div>

    <div id="action-box">
        <div class="title-event">BNZ ENGINE v2</div>
        <div class="desc-event">En attente du premier joueur...</div>
    </div>

<script>
    let chips = 100;
    // B uniquement slot 0, N slot 1, Z slot 2. Autres symboles partout.
    const fruitSyms = ['üç∫', 'üíÄ', 'üî•', 'üÉè', 'üçå', 'üçí', 'üçã'];

    const EVENTS = {
    DOUBLE: [
        { t: "CIBLE", d: "Donne 2 gorg√©es √† ton voisin de gauche." },
        { t: "MIROIR", d: "Choisis un partenaire : s'il boit, tu bois, et vice versa." },
        { t: "INVENTEUR", d: "Interdis un mot (ex: 'boire') jusqu'au prochain Double." },
        { t: "SYLLABE", d: "Jeu des suites (Bateau -> Tonneau). Le premier qui bloque boit." },
        { t: "LE SAVANT", d: "Cite 5 villes d'un pays choisi par les autres en 10s ou bois 3 fois." },
        { t: "C'EST QUI ?", d: "√Ä 3, tout le monde pointe celui qui est le plus '...'. Le plus d√©sign√© boit 3 fois." },
        { t: "SANT√â", d: "Tout le monde boit une gorg√©e, sauf toi." },
        { t: "FINGERS", d: "Jeu du doigt sur le verre : le dernier boit." },
        { t: "MARQUE", d: "Donne une marque de voiture. Le premier qui s√®che boit." },
        { t: "VETO", d: "Annule la prochaine gorg√©e que tu devrais prendre." }
    ],
    TRIPLE: [
        { t: "DICTATEUR", d: "D√©signe 3 personnes qui doivent finir leur verre." },
        { t: "CASCADE", d: "Lance une cascade g√©n√©rale. Personne ne s'arr√™te avant toi." },
        { t: "D√âCRET ROYAL", d: "Invente une r√®gle (ex: pas de pr√©noms). Celui qui faut boit." },
        { t: "L'ENCH√àRE", d: "D√©fie le groupe sur un nombre de gorg√©es. Le perdant boit le max." },
        { t: "ESCLAVE", d: "La personne √† ta droite doit t'apporter tes verres pendant 20 min." },
        { t: "BUFFLE", d: "Interdiction de boire de la main droite (ou gauche pour les gauchers)." },
        { t: "PYRAMIDE", d: "Distribue 5 gorg√©es √† r√©partir dans le groupe." },
        { t: "CRACKLIST", d: "Th√®me : 'S√©ries Netflix'. Le premier qui s√®che prend un shot." },
        { t: "ROI", d: "Personne ne peut te regarder dans les yeux sans boire." },
        { t: "TOUR DE TABLE", d: "Raconte une anecdote. Ceux qui l'ont d√©j√† fait boivent." }
    ],
    BNZ: [
        { t: "LE SAINT GRAAL", d: "üî• TU REMPORTES 10 JETONS IRL ! üî•" }
    ]
};

    function play() {
        if (chips < 10) return;
        chips -= 10;
        updateUI();

        document.getElementById('spin-btn').disabled = true;
        document.getElementById('action-box').innerHTML = '<div class="title-event">ROTATION...</div>';

        let res = [];
        const rng = Math.random();

        // LOGIQUE DE PROBABILIT√âS
        if (rng < 0.02) { 
            res = ['B', 'N', 'Z']; 
        } else if (rng < 0.07) { 
            const s = fruitSyms[Math.floor(Math.random()*fruitSyms.length)];
            res = [s, s, s];
        } else if (rng < 0.37) { 
            const s = fruitSyms[Math.floor(Math.random()*fruitSyms.length)];
            const other = fruitSyms[(fruitSyms.indexOf(s)+1)%fruitSyms.length];
            // On s'assure que B, N, Z ne pop pas dans les doubles fruits pour respecter ta r√®gle
            res = [s, s, other]; 
        } else {
            // Perte : On m√©lange al√©atoirement sans respecter les combos
            res = [
                Math.random() > 0.8 ? 'B' : fruitSyms[0],
                Math.random() > 0.8 ? 'N' : fruitSyms[1],
                fruitSyms[2]
            ];
        }

        setTimeout(() => {
            document.getElementById('r0').innerText = res[0];
            document.getElementById('r1').innerText = res[1];
            document.getElementById('r2').innerText = res[2];
            resolve(res);
        }, 600);
    }

    function resolve(res) {
        const box = document.getElementById('action-box');
        let type = "";
        let win = 0;

        if (res[0]==='B' && res[1]==='N' && res[2]==='Z') { type = "BNZ"; win = 0; }
        else if (res[0] === res[1] && res[1] === res[2]) { type = "TRIPLE"; win = 50; }
        else if (res[0] === res[1] || res[1] === res[2] || res[0] === res[2]) { type = "DOUBLE"; win = 5; }

        if (type !== "") {
            const evList = EVENTS[type];
            const ev = evList[Math.floor(Math.random()*evList.length)];
            chips += win;
            let cls = type === "TRIPLE" ? "rare" : (type === "BNZ" ? "legendary" : "");
            box.innerHTML = `<div class="title-event ${cls}">${type} !</div><div class="title-event" style="font-size:1.2rem">${ev.t}</div><div class="desc-event">${ev.d}</div>`;
        } else {
            box.innerHTML = `<div class="title-event">PERDU</div><div class="desc-event">Passe le tour au suivant.</div>`;
        }

        if (chips < 10) showGameOver();
        else document.getElementById('spin-btn').disabled = false;
        updateUI();
    }

    function showGameOver() {
        document.getElementById('action-box').innerHTML = `<div class="title-event" style="color:red">√Ä SEC !</div><div class="desc-event">Bois ton shot sec pour recharger 100 jetons.</div>`;
        document.getElementById('spin-btn').style.display = "none";
        document.getElementById('refill-btn').style.display = "inline-block";
    }

    function refill() {
        chips = 100;
        document.getElementById('refill-btn').style.display = "none";
        document.getElementById('spin-btn').style.display = "inline-block";
        document.getElementById('spin-btn').disabled = false;
        updateUI();
    }

    function updateUI() { document.getElementById('chips-display').innerText = chips; }
</script>
</body>
</html>
